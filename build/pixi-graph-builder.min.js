var GB=function(e){function i(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}var n={};return i.m=e,i.c=n,i.p="",i(0)}([function(e,i,n){i.version="0.0.3",i.create=function(e){var i=n(1),t=n(2),a={initialConfig:e,view:new i(e.view),nodeTypes:e.nodeTypes},o={};return a.model=new t(a.view,a.nodeTypes,o,e),a.view.graph.interactive=!0,e.view.controls&&n(3)(a,e.view.controls,o),n(4)(a),a}},function(e,i){e.exports=function(e){this.width=e.width||window.innerWidth,this.height=e.height||window.innerWidth,this.renderer=new PIXI.WebGLRenderer(this.width,this.height,{transparent:e.transparent||!1}),this.stage=new PIXI.Container,this.graph=new PIXI.Container,this.links=new PIXI.Graphics,this.graph.position.x=this.width/2,this.graph.position.y=this.height/2,this.graph.addChild(this.links),this.stage.addChild(this.graph),document.getElementById(e.element).appendChild(this.renderer.view)}},function(e,i){e.exports=function(e,i,n,t){this.data={nodes:[],links:[]};var a=this.data;this.force=d3.layout.force().nodes(this.data.nodes).links(this.data.links).gravity(.002).charge(-100).linkDistance(35),this.addNode=function(o){if(!this.findNode(o.id)){var r=i[o.type],s=PIXI.Sprite.fromImage(r.texture);s.scale.x=r.scale||1,s.scale.y=r.scale||1,s.anchor.x=.5,s.anchor.y=.5,e.graph.addChild(s);var d=this.data.nodes.push({id:o.id,data:o.data,fixed:o.fixed||!1,x:o.pos?o.pos.x:void 0,y:o.pos?o.pos.y:void 0,multiId:o.multiId,type:o.type,$node:s});s.interactive=!0,s.on("mousedown",function(e){n.draggable=r.draggable?a.nodes[d-1]:void 0}),s.on("rightclick",function(e){a.nodes[d-1].fixed=!1});for(var h in r.events)s.on(h,function(e){r.events[h](e,a.nodes[d-1])});for(var h in t.events)s.on(h,function(e){t.events[h](e,a.nodes[d-1])});return this.force.start(),this.data.nodes[d-1]}},this.addLink=function(i,n,a){var i=this.findNode(i),n=this.findNode(n),o=new PIXI.Graphics;if(t.links.directed){var r=PIXI.Sprite.fromImage(t.links.directed.arrow);r.scale.x=t.links.directed.scale||1,r.scale.y=t.links.directed.scale||1,r.anchor.x=.5,r.anchor.y=.5,o.addChild(r)}e.links.addChild(o),this.data.links.push({source:i,target:n,value:a,$link:o}),this.force.start()},this.findNode=function(e){for(var i in this.data.nodes)if(this.data.nodes[i].id===e)return this.data.nodes[i]}}},function(e,i){e.exports=function(e,i,n){function t(n){var t=i.zoom&&i.zoom.min||.01,a=i.zoom&&i.zoom.max||3,o=n.deltaY,r=n.offsetX,s=n.offsetY;o=o>0?.9:1.1;var d={x:(r-e.view.graph.x)/e.view.graph.scale.x,y:(s-e.view.graph.y)/e.view.graph.scale.y};o=e.view.graph.scale.y*o,o<=t&&(o=t),o>=a&&(o=a);var h={x:d.x*o+e.view.graph.x,y:d.y*o+e.view.graph.y};i.autoScale&&e.model.data.nodes.forEach(function(i){i.$node.scale.x=i.$node.scale.y=(a+1+e.initialConfig.nodeTypes[i.type].scale||.3)-o}),e.view.graph.x-=h.x-r,e.view.graph.y-=h.y-s,e.view.graph.scale.x=o,e.view.graph.scale.y=o}var a,o,r=!1;e.view.stage.hitArea=new PIXI.Rectangle(0,0,window.innerWidth,window.innerHeight),e.view.stage.interactive=!0,e.view.stage.on("mousedown",function(e){var i=e.data.global;a=i.x,o=i.y,r=!0}),e.view.stage.on("mousemove",function(i){var t=i.data.global,s=i.data.getLocalPosition(e.view.graph);return n.draggable?(n.draggable.fixed=!0,n.draggable.px=s.x,n.draggable.py=s.y,void e.model.force.start()):void(r&&(e.view.graph.position.x+=t.x-a,e.view.graph.position.y+=t.y-o,a=t.x,o=t.y))}),e.view.stage.on("mouseup",function(){n.draggable=void 0,r=!1}),e.view.renderer.view.addEventListener("wheel",t),e.view.renderer.view.addEventListener("contextmenu",function(e){e.preventDefault()})}},function(e,i){e.exports=function(e){function i(){e.model.data.nodes.forEach(function(e){e.$node.position.x=e.x,e.$node.position.y=e.y}),e.model.data.links.forEach(function(i){i.$link.clear(),i.$link.lineStyle(e.initialConfig.links.width||1,e.initialConfig.links.color||0,e.initialConfig.links.opacity||1),i.$link.moveTo(i.target.x,i.target.y),i.$link.lineTo(i.source.x,i.source.y),i.$link.children[0]&&(i.$link.children[0].position.x=(i.target.x+i.source.x)/2,i.$link.children[0].position.y=(i.target.y+i.source.y)/2,i.$link.children[0].rotation=Math.atan2(i.target.y-i.source.y,i.target.x-i.source.x))}),requestAnimationFrame(i),e.view.renderer.render(e.view.stage)}i()}}]);