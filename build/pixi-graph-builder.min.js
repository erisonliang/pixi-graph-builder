var GB=function(e){function i(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var n={};return i.m=e,i.c=n,i.p="",i(0)}([function(e,i,n){i.version="0.0.3",i.create=function(e){var i=n(1),t=n(2),e=n(3)(e),o={config:e,view:new i(e.view),nodeTypes:e.nodeTypes},a={};return o.model=new t(o,a),o.view.graph.interactive=!0,e.view.controls&&n(4)(o,a),n(5)(o),o}},function(e,i){e.exports=function(e){this.width=e.width,this.height=e.height,this.renderer=new PIXI.WebGLRenderer(this.width,this.height,{transparent:e.transparent}),this.stage=new PIXI.Container,this.graph=new PIXI.Container,this.links=new PIXI.Graphics,this.graph.position.x=this.width/2,this.graph.position.y=this.height/2,this.graph.addChild(this.links),this.stage.addChild(this.graph),document.getElementById(e.element).appendChild(this.renderer.view)}},function(e,i){e.exports=function(e,i){this.data={nodes:[],links:[]};var n=this.data;this.force=d3.layout.force().nodes(this.data.nodes).links(this.data.links).gravity(.002).charge(-100).linkDistance(35),this.addNode=function(t){if(!this.findNode(t.id)){var o=e.nodeTypes[t.type],a=PIXI.Sprite.fromImage(o.texture);a.scale.x=o.scale||1,a.scale.y=o.scale||1,a.anchor.x=.5,a.anchor.y=.5,e.view.graph.addChild(a);var r=this.data.nodes.push({id:t.id,data:t.data,fixed:t.fixed||!1,x:t.pos?t.pos.x:void 0,y:t.pos?t.pos.y:void 0,multiId:t.multiId,type:t.type,$node:a});a.interactive=!0,a.on("mousedown",function(e){i.draggable=o.draggable?n.nodes[r-1]:void 0}),a.on("rightclick",function(e){n.nodes[r-1].fixed=!1});for(var s in o.events)a.on(s,function(e){o.events[s](e,n.nodes[r-1])});for(var s in e.config.events)a.on(s,function(i){e.config.events[s](i,n.nodes[r-1])});return this.force.start(),this.data.nodes[r-1]}},this.addLink=function(i,n,t){var i=this.findNode(i),n=this.findNode(n),o=new PIXI.Graphics;if(e.config.links.directed){var a=PIXI.Sprite.fromImage(e.config.links.directed.arrow);a.scale.x=e.config.links.directed.scale||1,a.scale.y=e.config.links.directed.scale||1,a.anchor.x=.5,a.anchor.y=.5,o.addChild(a)}e.view.links.addChild(o),this.data.links.push({source:i,target:n,value:t,$link:o}),this.force.start()},this.findNode=function(e){for(var i in this.data.nodes)if(this.data.nodes[i].id===e)return this.data.nodes[i]}}},function(e,i){e.exports=function(e){function i(e,n){return Object.keys(n).forEach(function(t){"object"==typeof e[t]&&"object"==typeof n[t]?e[t]=i(e[t],n[t]):e[t]=n[t]}),e}var n={links:{width:10,color:3447003,opacity:.5,directed:!1},view:{transparent:!0,width:window.innerWidth,height:window.innerHeight,controls:{autoScale:!0,zoom:{max:1.5,min:.1}}}},t={draggable:!0,scale:1};return Object.keys(e.nodeTypes).forEach(function(n){e.nodeTypes[n]=i(JSON.parse(JSON.stringify(t)),e.nodeTypes[n])}),i(n,e)}},function(e,i){e.exports=function(e,i){function n(i){var n=e.config.view.controls.zoom&&e.config.view.controls.zoom.min||.01,t=e.config.view.controls.zoom&&e.config.view.controls.zoom.max||3,o=i.deltaY,a=i.offsetX,r=i.offsetY;o=o>0?.9:1.1;var s={x:(a-e.view.graph.x)/e.view.graph.scale.x,y:(r-e.view.graph.y)/e.view.graph.scale.y};o=e.view.graph.scale.y*o,o<=n&&(o=n),o>=t&&(o=t);var d={x:s.x*o+e.view.graph.x,y:s.y*o+e.view.graph.y};e.config.view.controls.autoScale&&e.model.data.nodes.forEach(function(i){i.$node.scale.x=i.$node.scale.y=(t+1+e.config.nodeTypes[i.type].scale||.3)-o}),e.view.graph.x-=d.x-a,e.view.graph.y-=d.y-r,e.view.graph.scale.x=o,e.view.graph.scale.y=o}var t,o,a=!1;e.view.stage.hitArea=new PIXI.Rectangle(0,0,e.view.width,e.view.height),e.view.stage.interactive=!0,e.view.stage.on("mousedown",function(e){var i=e.data.global;t=i.x,o=i.y,a=!0}),e.view.stage.on("mousemove",function(n){var r=n.data.global,s=n.data.getLocalPosition(e.view.graph);return i.draggable?(i.draggable.fixed=!0,i.draggable.px=s.x,i.draggable.py=s.y,void e.model.force.start()):void(a&&(e.view.graph.position.x+=r.x-t,e.view.graph.position.y+=r.y-o,t=r.x,o=r.y))}),e.view.stage.on("mouseup",function(){i.draggable=void 0,a=!1}),e.view.renderer.view.addEventListener("wheel",n),e.view.renderer.view.addEventListener("contextmenu",function(e){e.preventDefault()})}},function(e,i){e.exports=function(e){function i(){e.model.data.nodes.forEach(function(e){e.$node.position.x=e.x,e.$node.position.y=e.y}),e.model.data.links.forEach(function(i){i.$link.clear(),i.$link.lineStyle(e.config.links.width,e.config.links.color,e.config.links.opacity),i.$link.moveTo(i.target.x,i.target.y),i.$link.lineTo(i.source.x,i.source.y),i.$link.children[0]&&(i.$link.children[0].position.x=(i.target.x+i.source.x)/2,i.$link.children[0].position.y=(i.target.y+i.source.y)/2,i.$link.children[0].rotation=Math.atan2(i.target.y-i.source.y,i.target.x-i.source.x))}),requestAnimationFrame(i),e.view.renderer.render(e.view.stage)}i()}}]);